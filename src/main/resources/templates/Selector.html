<!DOCTYPE html>
<html lang="en"xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edita tu pedido</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<!--Pantalla de carga-->
<div th:replace="fragments/layout::pageloader"></div>

<nav class="d-flex p-2 align-items-center">
    <div class="d-flex align-items-center justify-content-center col-6">
        <a id="home" th:href="@{/}" class="d-flex align-items-center py-2 text-pizza-dark rounded-3 gap-1 font-fugaz-one">
            <img th:src="@{/images/logo.png}" class="img-fluid" width="40px">
            HappyPizza
        </a>
    </div>
</nav>
<div class="px-2">
    <div class="col-5 d-flex justify-content-start justify-content-sm-center justify-content-md-center justify-content-lg-center justify-content-xl-center justify-content-xxl-center align-items-center">
        <a th:href="@{${'/'+category}}" id="back" class="d-flex justify-content-center align-items-center p-2 font-fredoka fw-semibold size-14 my-2">
            <div class="d-flex justify-content-center align-items-center rounded-4 bg-pizza-yellow p-1 mx-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"/>
                </svg>
            </div>
            Volver
        </a>
    </div>
</div>
<main class="pb-5">
    <div class="submain">

        <div class="w-100 d-flex align-items-center justify-content-center h-100">

            <div class="card-selector shadow-sm rounded-4 col-11 col-sm-7 col-md-5 col-lg-4 col-xl-3 col-xxl-3">
                <div class="card-img-selector">
                    <img th:src="${img}" alt="img">
                </div>
                <div class="card-body-selector p-3">
                    <div class="d-flex justify-content-between mb-3">
                        <h5 class="card-title" th:text="${title}"></h5>
                        <h5 class="card-title d-flex">
                            s/.<div th:text="${price}"></div>
                        </h5>
                    </div>
                    <form th:action="@{/selection}" method="GET">
                        <input type="hidden" id="repertory" name="repertory" th:value="${id}">
                        <div id="provents">
                            <div th:if="${error != null}" class="d-flex justify-content-center align-content-center my-5">
                                <h6 th:text="${error}" class="text-center"></h6>
                            </div>
                            <div th:if="${proprima != null}">
                                <div class="form-style rounded-2 p-2 mb-3 size-14 font-roboto rounded-3 w-100 d-flex justify-content-between align-items-center">
                                    <div class="grid">
                                        <p class="m-0 fw-semibold size-18" th:text="${proprima.nombre}"></p>
                                        <span th:text="${proprima.tamano}"></span>
                                        <input type="hidden" class="occult" th:value="${proprima.nombre}" readonly>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-check-circle-fill mx-1" viewBox="0 0 16 16">
                                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                    </svg>
                                </div>
                            </div>
                            <div th:if="${rpdetalle != null}" th:each="detalle, iterStat : ${rpdetalle}">
                                <a th:each="i : ${#numbers.sequence(1, detalle.unidades)}"
                                   th:href="@{/selector_products
                                (
                                    product=${encodes[iterStat.index][0]},
                                    type=${encodes[iterStat.index][1]},
                                    id=${id},
                                    title=${title},
                                    price=${price},
                                    img=${img},
                                    category=${category}

                                )}" class="form-style rounded-2 p-2 mb-3 size-14 font-roboto rounded-3 w-100 d-flex justify-content-between align-items-center hover-gray">
                                    <div class="grid">
                                        <p class="m-0 fw-semibold size-18" th:text="${'Seleccionar '+detalle.producto}"></p>
                                        <span th:text="${detalle.detalle}"></span>
                                    </div>
                                    <input type="hidden" class="occult" readonly>
                                    <svg width="19" height="16" viewBox="0 0 19 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10.7083 13.8337L16.75 8.00033L10.7083 2.16699M2.25 13.8337L8.29167 8.00033L2.25 2.16699" stroke="#232323" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </a>
                            </div>

                            <div class="d-flex align-items-end w-100 justify-content-end gap-2">
                                <button th:if="${error == null}" type="submit" class="btn-disabled rounded-3" id="add-to-car" disabled>Agregar al carrito</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/script.js}"></script>
<script>

</script>
</body>
</html>